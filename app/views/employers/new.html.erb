<h1 class="main-title"> Request to Receive COVID-19 Information About Your Employees or Students </h1>

<%= form_with model: @employer, remote: true, 
                                html: { novalidate: true }, 
                                data: { 
                                    controller: "employer-form", 
                                    target: "employer-form.form", 
                                    action: "ajax:beforeSend->employer-form#submitForm"
                                }, 
                                class: "block mt-10" do |f| %>
                                
    <div class="field-fullwidth">
        <p class="title">What information are you seeking about individuals affiliated with your organization? (Select all that apply) <span class="field-required">*</span></p>
        <div class="w-full checkboxes-container">
            <div>
                <span> <%= f.check_box :screening_info, class: "form-checkbox" %> </span>
                <span> <%= f.label :screening_info, "COVID-19 Screening", class: "text-base" %> </span>
            </div>
            <div>
                <span> <%= f.check_box :testing_info, class: "form-checkbox" %> </span>
                <span> <%= f.label :testing_info, "COVID-19 Testing", class: "text-base" %> </span>
            </div>
            <div>
                <span> <%= f.check_box :vacination_info, class: "form-checkbox" %> </span>
                <span> <%= f.label :vacination_info, "COVID-19 Vaccination", class: "text-base" %> </span>
            </div>
            <div class="w-full flex flex-col">
                <p class="title"> OR </p>
                <%= f.label :other_info, "Other", class: "block w-full text-base" %>
                <%= f.text_area :other_info, placeholder: "Enter Details Here", class: "form-textarea w-full" %>
            </div>
        </div>
        <p class="error-message mt-2 text-yellow-400 hidden" data-target="employer-form.checkboxErrors">Please select at least one option or enter other details!</p>
    </div>

    <div class="field-fullwidth" data-controller="employer-form">
        <p class="title"> Business Location/Environment (Select all that apply) </p>
        <div class="multiselect-dropdown">
            <div class="selectBox"data-action="click->employer-form#showCheckboxes">
                <select class="form-select w-1/3">
                    <option>Select</option>
                </select>
                <div class="overSelect"></div>
            </div>
            <div class="checkboxes-in-dropdown" data-target="employer-form.locationsCheckboxes">
                <% BUSINESS_LOCATIONS.each do |location| %>
                <div class="relative flex items-start px-3 hover:bg-blue-50">
                    <div class="absolute flex items-center h-5">
                        <%= f.check_box(:business_locations, {multiple: true, id: "location_#{location}", class: "form-checkbox cursor-pointer"}, location) %>
                    </div>
                    <div class="pl-6 text-sm leading-5">
                        <label for="location_<%=location%>" class="cursor-pointer"> <%= location %> </label>
                    </div>
                </div>
                <% end %>
            </div>
        </div>
    </div>

    <div class="field-fullwidth">
        <p class="title"> Contact Details </p>
        <div class="grid grid-cols-3 gap-4">
            <div>
                <%= f.label :first_name, "First Name", class: "block" %>
                <%= f.text_field :first_name, required: true, 
                                              data: { action: "blur->employer-form#validateFirstName" }, 
                                              class: "form-input w-full" %>
                <p class="error-message mb-4 text-yellow-400 hidden"></p>
            </div>
            <div>
                <%= f.label :last_name, "Last Name", class: "block" %>
                <%= f.text_field :last_name, required: true, 
                                             data: { action: "blur->employer-form#validateLastName" }, 
                                             class: "form-input w-full" %>
                <p class="error-message mb-4 text-yellow-400 hidden"></p>
            </div>
            <div>
                <%= f.label :position, "Position/Title", class: "block" %>
                <%= f.text_field :position, required: true, 
                                            data: { action: "blur->employer-form#validatePosition" }, 
                                            class: "form-input w-full" %>
                <p class="error-message mb-4 text-yellow-400 hidden"></p>
            </div>
            <!-- <div>
                <%# f.label :company_name, "Company Name", class: "block" %>
                <%# f.text_field :company_name, class: "form-input w-full" %>
            </div> -->
        </div>

        <div class="flex">
            <div class="w-4/12 mr-4">
                <%= f.label :address_1, "Address 1", class: "block" %>
                <%= f.text_field :address_1, required: true, 
                                             data: { action: "blur->employer-form#validateAddress1" }, 
                                             class: "form-input w-full" %>
                <p class="error-message mb-4 text-yellow-400 hidden"></p>
            </div>
            <div class="w-4/12 mr-4">
                <%= f.label :address_2, "Unit Number/Address 2", class: "block" %>
                <%= f.text_field :address_2, required: true, 
                                             data: { action: "blur->employer-form#validateAddress2" }, 
                                             class: "form-input w-full" %>
                <p class="error-message mb-4 text-yellow-400 hidden"></p>
            </div>
            <div class="flex-1 mr-4">
                <%= f.label :city, class: "block" %>
                <%= f.text_field :city, required: true, 
                                        data: { action: "blur->employer-form#validateCity" },
                                        class: "form-input w-full" %>
                <p class="error-message mb-4 text-yellow-400 hidden"></p>
            </div>
            <div class="flex-1 mr-4">
                <%= f.label :state, class: "block" %>
                <%= f.text_field :state, required: true, 
                                         data: { action: "blur->employer-form#validateState" },
                                         class: "form-input w-full" %>
                <p class="error-message mb-4 text-yellow-400 hidden"></p>
            </div>
            <div class="flex-1">
                <%= f.label :zip_code, "Zip Code", class: "block" %>
                <%= f.text_field :zip_code, required: true, 
                                            data: { action: "blur->employer-form#validateZipCode" },
                                            class: "form-input w-full" %>
                <p class="error-message mb-4 text-yellow-400 hidden"></p>
            </div>
        </div>

        <div class="grid grid-cols-4 gap-4">
            <div>
                <%= f.label :office_phone, "Office Phone Number", class: "block" %>
                <%= f.text_field :office_phone, required: true, 
                                                data: { action: "blur->employer-form#validateOfficePhone" }, 
                                                class: "form-input w-full" %>
                <p class="error-message mb-4 text-yellow-400 hidden"></p>
            </div>
            <div>
                <%= f.label :mobile_phone, "Mobile Phone Name", class: "block" %>
                <%= f.text_field :mobile_phone, required: true, 
                                                data: { action: "blur->employer-form#validateMobilePhone" }, 
                                                class: "form-input w-full" %>
                <p class="error-message mb-4 text-yellow-400 hidden"></p>
            </div>
            <div>
                <%= f.label :email, "Email Address", class: "block" %>
                <%= f.email_field :email, required: true, 
                                          data: { action: "blur->employer-form#validateEmail" }, 
                                          class: "form-input w-full" %>
                <p class="error-message mb-4 text-yellow-400 hidden"></p>
            </div>
            <div>
                <%= f.label :website, "Website", class: "block" %>
                <%= f.text_field :website, class: "form-input w-full" %>
            </div>
        </div>
    </div>

    <!-- Back up Contact Info -->
    <div class="field-fullwidth">
        <p class="title"> Back-Up Contact's Details </p>
        <div class="grid grid-cols-3 gap-4">
            <div>
                <%= f.label :backup_first_name, "Back-Up Contact's First Name", class: "block" %>
                <%= f.text_field :backup_first_name, required: true, 
                                                     data: { action: "blur->employer-form#validateBackupFirstName" }, 
                                                     class: "form-input w-full" %>
                <p class="error-message mb-4 text-yellow-400 hidden"></p>
            </div>
            <div>
                <%= f.label :backup_last_name, "Back-Up Contact's Last Name", class: "block" %>
                <%= f.text_field :backup_last_name, required: true, 
                                                    data: { action: "blur->employer-form#validateBackupLastName" }, 
                                                    class: "form-input w-full" %>
                <p class="error-message mb-4 text-yellow-400 hidden"></p>
            </div>
            <div>
                <%= f.label :backup_position, "Back-Up Contact's Position/Title", class: "block" %>
                <%= f.text_field :backup_position, required: true, 
                                                   data: { action: "blur->employer-form#validateBackupPosition" }, 
                                                   class: "form-input w-full" %>
                <p class="error-message mb-4 text-yellow-400 hidden"></p>
            </div>
        </div>

        <div class="flex">
            <div class="flex-1 mr-4">
                <%= f.label :backup_company_name, "Company Name", class: "block" %>
                <%= f.text_field :backup_company_name, class: "form-input w-full" %>
            </div>
            <div class="w-3/12 mr-4">
                <%= f.label :backup_address_1, "Address 1", class: "block" %>
                <%= f.text_field :backup_address_1, required: true, 
                                                    data: { action: "blur->employer-form#validateBackupAddress1" }, 
                                                    class: "form-input w-full" %>
                <p class="error-message mb-4 text-yellow-400 hidden"></p>
            </div>
            <div class="w-3/12 mr-4">
                <%= f.label :backup_address_2, "Address 2", class: "block" %>
                <%= f.text_field :backup_address_2, required: true, 
                                                    data: { action: "blur->employer-form#validateBackupAddress2" }, 
                                                    class: "form-input w-full" %>
                <p class="error-message mb-4 text-yellow-400 hidden"></p>
            </div>
            <div class="flex-1 mr-4">
                <%= f.label :backup_city, "City", class: "block" %>
                <%= f.text_field :backup_city, required: true, 
                                               data: { action: "blur->employer-form#validateBackupCity" }, 
                                               class: "form-input w-full" %>
                <p class="error-message mb-4 text-yellow-400 hidden"></p>
            </div>
            <div class="flex-1 mr-4">
                <%= f.label :backup_state, "State", class: "block" %>
                <%= f.text_field :backup_state, required: true, 
                                                data: { action: "blur->employer-form#validateBackupState" }, 
                                                class: "form-input w-full" %>
                <p class="error-message mb-4 text-yellow-400 hidden"></p>
            </div>
            <div class="flex-1 mr-4">
                <%= f.label :backup_zip_code, "Zip Code", class: "block" %>
                <%= f.text_field :backup_zip_code, required: true, 
                                                   data: { action: "blur->employer-form#validateBackupZipCode" }, 
                                                   class: "form-input w-full" %>
                <p class="error-message mb-4 text-yellow-400 hidden"></p>
            </div>
        </div>

        <div class="grid grid-cols-3 gap-4">
            <div>
                <%= f.label :backup_office_phone, "Office Phone Number", class: "block" %>
                <%= f.text_field :office_phone, required: true, 
                                                data: { action: "blur->employer-form#validateBackupOfficePhone" }, 
                                                class: "form-input w-full" %>
                <p class="error-message mb-4 text-yellow-400 hidden"></p>
            </div>
            <div>
                <%= f.label :backup_mobile_phone, "Mobile Phone Name", class: "block" %>
                <%= f.text_field :mobile_phone, required: true, 
                                                data: { action: "blur->employer-form#validateBackupMobilePhone" }, 
                                                class: "form-input w-full" %>
                <p class="error-message mb-4 text-yellow-400 hidden"></p>
            </div>
            <div>
                <%= f.label :backup_email, "Email Address", class: "block" %>
                <%= f.text_field :backup_email, required: true, 
                                                data: { action: "blur->employer-form#validateBackupEmail" }, 
                                                class: "form-input w-full" %>
                <p class="error-message mb-4 text-yellow-400 hidden"></p>
            </div>
        </div>
    </div>

    <div class="field-side-by-side">
        <div>
            <p class="title">Employee Info </p>
            <%= f.label :total_employees, "Total Number of Employees", class: "block" %>
            <%= f.text_field :total_employees, required: true, 
                                               data: { action: "blur->employer-form#validateEmployeesNumber" }, 
                                               class: "form-input w-full" %>
                <p class="error-message mb-4 text-yellow-400 hidden"></p>
        </div>
        <div>
            <p class="title">Location Info </p>
            <%= f.label :total_locations, "Total Number of Locations", class: "block" %>
            <%= f.text_field :total_locations, required: true, 
                                               data: { action: "blur->employer-form#validateLocationsNumber" }, 
                                               class: "form-input w-full" %>
                <p class="error-message mb-4 text-yellow-400 hidden"></p>
        </div>
    </div>

    <div class="field-fullwidth">
        <%= f.label :comment, "Please share any additional, relevant information about your business", class: "block" %>
        <%= f.text_area :comment, class: "form-textarea w-1/2" %>
    </div>

    <div class="flex justify-end">
        <%= f.submit "Submit Request", class: "button-primary" %>
        <%= link_to "Cancel", root_path, class: "button-primary" %>
    </div>
<% end %>